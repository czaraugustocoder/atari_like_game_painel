<html>
    <head>
        <meta charset="utf-8">
        <title>Bomberman</title>

        <style>
            #tela {
                border: 5px solid #CCC;
                image-rendering: pixelated;
                image-rendering: crisp-edges;
                image-rendering: -moz-crisp-edges;
                width: 400px;
                height: 400px;
            }
        </style>
    </head>
    <body>
        <canvas id="tela" width="10" height="10"></canvas>

        <script>
            const tela = document.getElementById("tela");
            const context = tela.getContext("2d");

            const game = {
                jogadores: {
                    'jogador1': { x: 0, y: 0 },
                    'jogador2': { x: 0, y: 9 },
                    'jogador3': { x: 9, y: 0 },
                    'jogador4': { x: 9, y: 9 }
                },
                frutas: {
                'fruta': { x: 5, y: 4 }
                }
            }

            document.addEventListener('keydown', handleKeydown);

            function handleKeydown(event) {
                const keyPressed = event.key
                const gamer = game.jogadores['jogador1']

                if (keyPressed === "ArrowUp" && gamer.y > 0) {
                    console.log("up")
                    gamer.y = gamer.y - 1
                    console.log(gamer.y)
                    renderTela(game)
                    console.log(coords_y.includes(4));
                }

                if (keyPressed === "ArrowRight" && gamer.x < 9) {
                    console.log("right")
                    gamer.x = gamer.x + 1
                    console.log(gamer.x)
                    renderTela(game)
                }

                if (keyPressed === "ArrowLeft" && gamer.x > 0) {
                    console.log("left")
                    gamer.x = gamer.x - 1
                    console.log(gamer.x)
                    renderTela(game)
                }

                if (keyPressed === "ArrowDown" && gamer.y < 9) {
                    console.log("down")
                    gamer.y = gamer.y + 1
                    console.log(gamer.y)
                    renderTela(game)
                }

            }

            let coords_x = []
            let coords_y = []

            renderTela(game)

            function renderTela(game) {
                coords_x = []
                coords_y = []
                context.fillStyle = "white"
                context.clearRect(0, 0, 10, 10)

                const lab = [
                [0,0,0,0,0,1,0,0,0,0],
                [0,0,0,1,0,0,0,1,1,0],
                [0,0,0,1,0,0,0,1,0,0],
                [0,1,1,1,0,0,0,1,0,0],
                [0,0,0,1,0,0,0,1,0,0],
                [0,0,0,1,0,0,0,1,0,0],
                [1,1,0,1,0,0,0,1,0,0],
                [0,0,0,1,1,1,1,1,0,1],
                [0,0,0,0,0,0,0,1,0,0],
                [0,0,0,1,0,0,0,0,0,0]
                ]

                let cont_linha = 0;
                let cont_ponto = 0;

                for (linha in lab) {
                    pontos = lab[linha]
                    cont_ponto = 0
                    for (ponto in pontos) {
                        if (lab[linha][ponto] == 1) {
                            context.fillStyle = "black";
                            coords_x.push(cont_ponto);
                            coords_y.push(cont_linha);
                            context.fillRect(cont_ponto, cont_linha, 1, 1);
                        }
                        cont_ponto += 1
                    }
                    cont_linha += 1
                }

                console.log(coords_x)
                console.log(coords_y)

                for (jogadorId in game.jogadores) {
                    const jogador = game.jogadores[jogadorId];
                    context.fillStyle = "blue";
                    context.fillRect(jogador.x, jogador.y, 1, 1);
                }

                for (frutaId in game.frutas) {
                    const fruta = game.frutas[frutaId];
                    context.fillStyle = "green";
                    context.fillRect(fruta.x, fruta.y, 1, 1);
                }

        }
        </script>
    </body>
</html>